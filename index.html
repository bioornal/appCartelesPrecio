<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Financiación - Muebles Online</title>
    <style>
        @media print {
            @page {
                size: A4;
                margin: 5mm;
            }
            body {
                margin: 0;
                padding: 0;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            .container {
                width: 100%;
                max-width: none;
                box-shadow: none !important;
                border: 1px solid #000 !important;
                padding: 10px;
                margin: 0 auto;
            }
            .no-print {
                display: none !important;
            }
            .header, .price-section, .list-price-section, .financing-header {
                padding: 3px 8px;
                margin-bottom: 5px;
            }
            .cash-price { font-size: 42px; }
            .list-price { font-size: 24px; }
            .product-name { font-size: 14px; font-weight: bold; padding: 5px; border-bottom: 1px solid #000; }
            .product-description { font-size: 10px; line-height: 1.2; text-align: justify; }
            .financing-header { font-size: 14px; letter-spacing: 3px; padding: 2px; margin-top: 10px; }
            table {
                font-size: 9px;
                width: 100%;
                margin-top: 5px;
            }
            th, td {
                padding: 3px;
                font-size: 8px;
            }
            .installments { font-size: 24px; }
            .discount-cell { font-size: 16px; }
            .logo {
                width: 70px;
                height: 70px;
            }
            .discount-percent { font-size: 32px; }
            .discount-text { font-size: 9px; }
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: white;
            border: 2px solid #000;
            padding: 0;
        }
        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 10px 15px;
            border-bottom: 2px solid #000;
        }
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .logo {
            width: 160px;
            height: 160px;
        }
        .logo img {
            width: 100%;
            height: auto;
            border-radius: 50%;
        }
        .date-display {
            font-size: 12px;
            color: #333;
        }
        .discount-section {
            text-align: center;
            border: 2px solid #000;
            padding: 10px 20px;
            background-color: white;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .discount-percent {
            font-size: 48px;
            font-weight: bold;
            margin: 0;
            line-height: 1;
        }
        .discount-text {
            font-size: 14px;
            margin: 0;
            line-height: 1.3;
            font-weight: bold;
            text-align: left;
        }
        .price-section {
            text-align: center;
            padding: 15px;
            border-bottom: 2px solid #000;
        }
        .cash-price {
            font-size: 36px;
            font-weight: normal;
            color: #4a4a4a;
            margin: 10px 0;
        }
        .product-name {
            font-size: 22px;
            font-weight: bold;
            text-transform: uppercase;
            text-align: center;
            padding: 10px;
        }
        .product-description {
            font-size: 16px;
            line-height: 1.3;
            color: #4a4a4a;
            margin-top: 5px;
            text-align: justify;
        }
        .list-price-section {
            margin: 20px 0 0 0;
        }
        .list-price-split {
            display: flex;
            flex-direction: row;
            align-items: stretch;
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }
        .list-price {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 62px;
            font-weight: bold;
            background: #f5f5f5;
            color: #222;
            height: 80px;
        }
        .financing-header {
            background-color: white;
            text-align: center;
            padding: 8px;
            font-size: 20px;
            letter-spacing: 8px;
            font-weight: bold;
            border-bottom: 2px solid #000;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            border: 1px solid #000;
            padding: 5px;
            font-size: 12px;
            font-weight: bold;
            background-color: #f0f0f0;
        }
        td {
            border: 1px solid #000;
            padding: 8px 5px;
            text-align: center;
            font-size: 14px;
        }
        .installments {
            font-size: 40px;
            font-weight: bold;
        }
        .discount-cell {
            font-size: 24px;
            font-weight: bold;
        }
        .cuota-cell,
        .total-cell {
            font-size: 12px;
            font-weight: bold;
        }
        .input-section {
            padding: 20px;
            background-color: #f5f5f5;
            border-bottom: 2px solid #000;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        .input-group input, .input-group textarea {
            resize: vertical;
            width: 100%;
            padding: 8px;
            border: 1px solid #999;
            font-size: 16px;
            box-sizing: border-box;
        }
        .btn-calculate {
            background-color: #333;
            color: white;
            padding: 12px;
            border: none;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        .btn-calculate:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-section no-print">
            <div class="input-group">
                <label for="productName">Nombre del Producto:</label>
                <input type="text" id="productName" placeholder="Ej: PLACARD laredo">
            </div>
            <div class="input-group">
                <label for="productMeasures">Medidas:</label>
                <input type="text" id="productMeasures" placeholder="Ej: 160.7x196x38.8CM">
            </div>
            <div class="input-group">
                <label for="productCode">Descripción/Código:</label>
                <textarea id="productCode" placeholder="Ej: ART. 2907-8977-8905..." rows="3"></textarea>
            </div>
            <div class="input-group">
                <label for="basePrice">Precio de Lista ($):</label>
                <input type="number" id="basePrice" placeholder="359999.90" step="0.01">
            </div>
            <button class="btn-calculate" onclick="calculateFinancing()">Calcular Financiación</button>
        </div>
        
        <div class="header">
            <div class="logo-section">
                <div class="logo">
                    <img src="https://res.cloudinary.com/djtvjkcu6/image/upload/v1751206020/MegaMuebles/logoRedondo_f7kulu.png" alt="Logo de la empresa">
                </div>
                <span class="date-display" id="currentDate"></span>
            </div>
            <div class="discount-section">
                <p class="discount-percent">-40%</p>
                <p class="discount-text">DESCUENTO<br>CONTADO<br>VALOR UNITARIO</p>
            </div>
        </div>
        
        <div class="price-section">
            <div class="cash-price" id="cashPrice"></div>
            <div class="product-name" id="productInfo"></div>
            <div class="product-description" id="productCodeDisplay"></div>
        </div>
        
        <div class="list-price-section">
            <div class="list-price-split">
                <div class="list-price" id="listPrice"></div>
            </div>
        </div>
        
        <div class="financing-header">
            <h2>Financiación 2x1</h2>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Plan</th>
                    <th>Cuotas</th>
                    <th>Recargo</th>
                    <th>Valor Cuota</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody id="financingTable2x1">
            </tbody>
        </table>

        <div class="financing-header">
            <h2>Financiación Unidad</h2>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Plan</th>
                    <th>Cuotas</th>
                    <th>Recargo</th>
                    <th>Valor Cuota</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody id="financingTableUnit">
            </tbody>
        </table>
    </div>

    <script>
        function formatNumber(num) {
            return Math.round(num).toLocaleString('es-AR', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).replace(/,/g, '.');
        }

        function calculateFinancing() {
            const productName = document.getElementById('productName').value || 'PRODUCTO';
            const productMeasures = document.getElementById('productMeasures').value || '';
            const productCode = document.getElementById('productCode').value || '';
            const basePrice = parseFloat(document.getElementById('basePrice').value) || 0;

            if (basePrice <= 0) {
                alert('Por favor ingrese un precio válido');
                return;
            }

            const cashPrice = basePrice * 0.6;
            const debitPrice = basePrice * 0.65;
            const oneInstallmentPrice = basePrice * 0.7;
            const threeInstallmentPrice = basePrice * 0.8;
            const sixInstallmentPrice = basePrice * 0.85;

            document.getElementById('cashPrice').textContent = '$' + formatNumber(cashPrice);
            document.getElementById('listPrice').textContent = '$ ' + formatNumber(basePrice);

            let productInfoHTML = productName.toUpperCase();
            if (productMeasures) {
                productInfoHTML += ` (${productMeasures})`;
            }
            document.getElementById('productInfo').innerHTML = productInfoHTML;
            document.getElementById('productCodeDisplay').innerHTML = productCode ? productCode.replace(/\n/g, '<br>') : '';

            // Los planes con recargo se basan en el precio unitario (60% del precio de lista)
            const twoForOnePlans = [
                { name: 'Transferencia/Débito', payments: 1, surcharge: 5, total: basePrice * 1.05, monthly: basePrice * 1.05 },
                { name: '1 Cuota', payments: 1, surcharge: 10, total: basePrice * 1.10, monthly: basePrice * 1.10 },
                { name: '3 Cuotas', payments: 3, surcharge: 18, total: basePrice * 1.18, monthly: (basePrice * 1.18) / 3 },
                { name: 'Plan Z', payments: 3, surcharge: 18, total: basePrice * 1.18, monthly: (basePrice * 1.18) / 3 },
                { name: '6 Cuotas', payments: 6, surcharge: 25, total: basePrice * 1.25, monthly: (basePrice * 1.25) / 6 }
            ];

            const unitPrice = basePrice * 0.6;
            const unitPlans = [
                { name: 'Transferencia/Débito', payments: 1, surcharge: 5, total: unitPrice * 1.05, monthly: unitPrice * 1.05 },
                { name: '1 Cuota', payments: 1, surcharge: 10, total: unitPrice * 1.10, monthly: unitPrice * 1.10 },
                { name: '3 Cuotas', payments: 3, surcharge: 18, total: unitPrice * 1.18, monthly: (unitPrice * 1.18) / 3 },
                { name: 'Plan Z', payments: 3, surcharge: 18, total: unitPrice * 1.18, monthly: (unitPrice * 1.18) / 3 },
                { name: '6 Cuotas', payments: 6, surcharge: 25, total: unitPrice * 1.25, monthly: (unitPrice * 1.25) / 6 }
            ];

            // Poblar tabla de VALOR 2x1 (con recargos)
            const tbody2x1 = document.getElementById('financingTable2x1');
            tbody2x1.innerHTML = '';
            twoForOnePlans.forEach(plan => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${plan.name}</td>
                    <td class="installments">${plan.payments}</td>
                    <td class="discount-cell">+${plan.surcharge}%</td>
                    <td class="cuota-cell">$ ${formatNumber(plan.monthly)}</td>
                    <td class="total-cell">$ ${formatNumber(plan.total)}</td>
                `;
                tbody2x1.appendChild(row);
            });

            // Poblar tabla de VALOR UNITARIO (con recargos)
            const tbodyUnit = document.getElementById('financingTableUnit');
            tbodyUnit.innerHTML = '';
            unitPlans.forEach(plan => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${plan.name}</td>
                    <td class="installments">${plan.payments}</td>
                    <td class="discount-cell">+${plan.surcharge}%</td>
                    <td class="cuota-cell">$ ${formatNumber(plan.monthly)}</td>
                    <td class="total-cell">$ ${formatNumber(plan.total)}</td>
                `;
                tbodyUnit.appendChild(row);
            });
        }

        // Allow Enter key to calculate
        document.getElementById('basePrice').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                calculateFinancing();
            }
        });

        // Load example on start
        window.onload = function() {
            // Set current date
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            document.getElementById('currentDate').textContent = `${day}/${month}/${year}`;

            // Load example data
            document.getElementById('productName').value = 'KIT DE COCINA MONTESA';
            document.getElementById('productMeasures').value = '160.7x196x38.8CM';
            document.getElementById('productCode').value = 'ART. 2907-8977-8905';
            document.getElementById('basePrice').value = '359999.90';
            calculateFinancing();
        };
    </script>
</body>
</html>